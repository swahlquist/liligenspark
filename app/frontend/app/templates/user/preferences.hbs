{{#if model.permissions.edit}}
  <h2>{{t "General Preferences" key='general_preferences'}}</h2>
  <form class="form-horizontal" {{action "savePreferences" on="submit"}}>
  {{#preference-box title="Basics" title_key='basics' open=true}}
    <span style='display: none;'>{{t "Basics" key='basics'}}</span>
    <div class="form-group">
      <label for="role" class="col-sm-3 control-label">{{t "Dashboard" key='role'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="role" content=dashboardViewList selection=pending_preferences.role action=(action (mut pending_preferences.role)) }}
      </div>
    </div>
    {{#unless non_communicator}}
      <div class="form-group">
        <label for="role" class="col-sm-3 control-label">{{t "On Launch" key='on_launch'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.auto_open_speak_mode}}
              {{t "Start app in Speak Mode on launch" key='start_in_speak_mode_on_launch'}}
            </label>
          </div>
        </div>
      </div>
    {{/unless}}
    {{#if advanced}}
      <div class="form-group">
        <label for="long_token" class="col-sm-3 control-label">{{t "Session Timeout" key='long_token'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.long_token id="long_token"}}
              {{t "Keep me logged in on this device. It is a private device and I will secure it by means outside of the app itself" key='enable_long_token'}}
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="require_speak_mode_pin" class="col-sm-3 control-label">{{t "Exiting" key='editing'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.require_speak_mode_pin id="require_speak_mode_pin"}}
            {{t "Require a PIN when exiting Speak Mode" key='require_speak_mode_pin'}}
          </label>
        </div>
      </div>
    </div>
    {{#if pending_preferences.require_speak_mode_pin}}
      <div class="form-group">
        <label for="speak_mode_pin" class="col-sm-3 control-label">{{t "Speak Mode PIN" key='speak_mode_pin'}}</label>
        <div class="col-sm-5">
          <label>
            {{input value=pending_preferences.speak_mode_pin class="form-control" id="speak_mode_pin" placeholder="4-digit numerical PIN"}}
          </label>
        </div>
      </div>
      <div class="form-group">
        <label for="hide_pin_hint" class="col-sm-3 control-label">{{t "Hide PIN" key='hide_pin'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.hide_pin_hint id="hide_pin_hint"}}
              {{t "Don't show hint for discovering forgotten PIN" key='hide_pin_hint'}}
            </label>
          </div>
          {{#if pending_preferences.hide_pin_hint}}
            <p class='text-danger' style='margin-top: 10px;'>{{t "NOTE: If the PIN hint is hidden, you won't be able to exit Speak Mode unless you remember the PIN, or can look it up on a different device." key='hidden_pin_warning'}}</p>
          {{/if}}
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="locale" class="col-sm-3 control-label">{{t "Preferred Language" key='preferred_language'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="locale" content=localeList selection=pending_preferences.locale action=(action (mut pending_preferences.locale)) }}
      </div>
    </div>
  {{/preference-box}}
  {{#preference-box title="Styling" glyph='glyphicon glyphicon-picture' title_key='styling'}}
    <span style='display: none;'>{{t "Styling" key='styling'}}</span>
    <div class="form-group">
      <label for="board_background" class="col-sm-3 control-label">{{t "Board Background Color" key='board_background'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="board_background" content=buttonBackgroundList selection=pending_preferences.board_background action=(action (mut pending_preferences.board_background)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="symbol_background" class="col-sm-3 control-label">{{t "Image Background Color" key='symbol_background'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="symbol_background" content=symbolBackgroundList selection=pending_preferences.symbol_background action=(action (mut pending_preferences.symbol_background)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="hidden_buttons" class="col-sm-3 control-label">{{t "Hidden Buttons" key='hidden_buttons'}}</label>
      <div class="col-sm-5">
        {{#if buttons_stretched}}
          <p class='form-control-static'><em>{{t "When \"Stretch Buttons\" is enabled, hidden buttons cannot be shown" key='no_hidden_buttons_when_stretching'}}</em></p>
        {{else}}
          {{bound-select select_class="form-control" select_id="hidden_buttons" content=hiddenButtonsList selection=pending_preferences.hidden_buttons action=(action (mut pending_preferences.hidden_buttons)) }}
        {{/if}}
      </div>
      {{#if app_state.feature_flags.enable_all_buttons}}
        <div class="col-sm-5 col-sm-offset-3">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.prevent_hide_buttons id="prevent_hide_buttons"}}
              {{t "Disable \"Show Hidden Buttons\" option in Speak Mode" key='prevent_hide_buttons'}}
            </label>
          </div>
        </div>
      {{/if}}
    </div>
    <div class="form-group">
      <label for="dim_level" class="col-sm-3 control-label">{{t "Dimmed Button Brigthness" key='dim_level'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="dim_level" content=dimLevelList selection=pending_preferences.dim_level action=(action (mut pending_preferences.dim_level)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="blank_status" class="col-sm-3 control-label">{{t "Status" key='status'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.blank_status id="blank_status"}}
            {{t "Show time, device status and notifications when vocalization box is empty" key='blank_status'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="word_suggestion_images" class="col-sm-3 control-label">{{t "Keyboard Suggestions" key='keyboard_suggestions'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.word_suggestion_images id="word_suggestion_images"}}
            {{t "Show images for keyboard suggestions" key='word_suggestion_images'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="high_contrast" class="col-sm-3 control-label">{{t "High Contrast" key='high_contrast'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.high_contrast id="high_contrast"}}
            {{t "Show all button images in high-contrast mode" key='high_contrast_images'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="dim_header" class="col-sm-3 control-label">{{t "Dim Header" key='dim_header'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.dim_header id="dim_header"}}
            {{t "Make the header and sidebar less bright" key='dim_header_long'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group" style="display: none;">
      <label for="stretch_buttons" class="col-sm-3 control-label">{{t "Fill Empty Button Spaces" key='stretch_buttons'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="stretch_buttons" content=buttonSpaceList selection=pending_preferences.stretch_buttons action=(action (mut pending_preferences.stretch_buttons)) }}
      </div>
    </div>
  {{/preference-box}}
  {{#preference-box title="Selection Settings" glyph='glyphicon glyphicon-hand-up' title_key='selection_settings'}}
    <span style='display: none;'>{{t "Selection Settings" key='selection_settings'}}</span>
    <div class="form-group">
      <label for="auto_home_return" class="col-sm-3 control-label">{{t "On Select" key='on_select'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.vocalize_buttons id="vocalize_buttons"}}
            {{t "Vocalize after each button press" key='vocalize_buttons'}}
          </label>
        </div>
        {{#if advanced}}
          {{#if pending_preferences.vocalize_buttons}}
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.vocalize_linked_buttons id="vocalize_linked_buttons"}}
                {{t "Vocalize when hitting linked buttons" key='vocalize_linked_buttons'}}
              </label>
            </div>
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.silence_spelling_buttons id="silence_spelling_buttons"}}
                {{t "Don't vocalize when spelling until the word is completed" key='silence_spelling_buttons'}}
              </label>
            </div>
          {{/if}}
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.click_buttons id="click_buttons"}}
              {{t "Make a clicking sound when hitting unspoken buttons" key='click_buttons'}}
            </label>
          </div>
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.vibrate_buttons id="vibrate_buttons"}}
              {{t "Vibrate the device when hitting buttons (if supported)" key='vibrate_buttons'}}
            </label>
          </div>
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.auto_home_return id="auto_home_return"}}
              {{t "Automatically return to Home board after an unlinked button is selected" key='auto_home_return'}}
            </label>
          </div>
        {{/if}}
      </div>
    </div>
    {{#if advanced}}
      <div class="form-group">
        <label for="highlighted_buttons" class="col-sm-3 control-label">{{t "Selection Highlights" key='highlighted_buttons'}}</label>
        <div class="col-sm-5">
          {{bound-select select_class="form-control" select_id="highlighted_buttons" content=highlighted_buttons_list selection=pending_preferences.highlighted_buttons action=(action (mut pending_preferences.highlighted_buttons)) }}
        </div>
      </div>
      {{#if some_highlighted_buttons}}
        <div class="form-group">
          <label for="highlight_popup_text" class="col-sm-3 control-label">{{t "Literacy Highlights" key='highlighted_popup_text'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.highlight_popup_text id="highlighted_popup_text"}}
                {{t "Highlight buttons using a text box for developing sight word reading" key='popup_for_sight_reading'}}
              </label>
            </div>
          </div>
        </div>
      {{/if}}
    {{/if}}
    <div class="form-group">
      <label for="activation_on_start" class="col-sm-3 control-label">{{t "Select on Press" key='activation_on_start'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.activation_on_start id="device_home"}}
            {{t "Select the button as soon as it is pressed" key='select_immediately'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="swipe_pages" class="col-sm-3 control-label">{{t "Swipe Pages" key='swipe_pages'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.swipe_pages id="swipe_pages"}}
            {{t "Use long swipe action to toggle between home and sidebar boards" key='swipe_pages_enabled'}}
          </label>
        </div>
      </div>
    </div>
    {{#if app_state.feature_flags.auto_inflections}}
      <div class="form-group">
        <label for="auto_inflections" class="col-sm-3 control-label">{{t "Automatic Inflections" key='auto_inflections'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.auto_inflections id="auto_inflections"}}
              {{t "Automatically update button inflections when the default doesn't match" key='enable_auto_inflections'}}
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    {{#if app_state.feature_flags.inflections_overlay}}
      <div class="form-group">
        <label for="inflections_overlay" class="col-sm-3 control-label">{{t "Long-Press" key='long_press'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.inflections_overlay id="inflections_overlay"}}
              {{t "Show inflection options on long-press in Speak Mode" key='inflections_overlay'}}
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    {{#unless pending_preferences.activation_on_start}}
      <div class="form-group">
        <label for="activation_location" class="col-sm-3 control-label">{{t "Select Based on" key='activation_location'}}</label>
        <div class="col-sm-5">
          {{bound-select select_class="form-control" select_id="activation_location" content=activationLocationList selection=pending_preferences.activation_location action=(action (mut pending_preferences.activation_location)) }}
        </div>
      </div>
      <div class="form-group">
        <label for="activation_cutoff" class="col-sm-3 control-label">{{t "Select Without Release After" key='activation_cutoff'}}</label>
        <div class="col-sm-3">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.activation_cutoff"}}>-</button>
            </span>
            {{input value=pending_preferences.activation_cutoff class="form-control" id="activation_cutoff" placeholder="disabled"}}
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.activation_cutoff"}}>+</button>
            </span>
          </div>
        </div>
        <div class="col-sm-2">
          <p class="form-control-static">{{t "milliseconds" key='milliseconds'}}</p>
        </div>
      </div>
      <div class="form-group">
        <label for="activation_minimum" class="col-sm-3 control-label">{{t "Must Press Button At Least" key='activation_minimum'}}</label>
        <div class="col-sm-3">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.activation_minimum"}}>-</button>
            </span>
            {{input value=pending_preferences.activation_minimum class="form-control" id="activation_minimum" placeholder="disabled"}}
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.activation_minimum"}}>+</button>
            </span>
          </div>
        </div>
        <div class="col-sm-2">
          <p class="form-control-static">{{t "milliseconds" key='milliseconds'}}</p>
        </div>
      </div>
    {{/unless}}
    <div class="form-group">
      <label for="debounce" class="col-sm-3 control-label">{{t "Ignore Repeat Hits For" key='ignore_repeat_hits'}}</label>
      <div class="col-sm-3">
        <div class="input-group">
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.debounce"}}>-</button>
          </span>
          {{input value=pending_preferences.debounce class="form-control" id="debounce" placeholder="100"}}
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.debounce"}}>+</button>
          </span>
        </div>
      </div>
      <div class="col-sm-2">
        <p class="form-control-static">{{t "milliseconds" key='milliseconds'}}</p>
      </div>
    </div>
  {{/preference-box}}
  {{#preference-box title="Logging and Sync" glyph='glyphicon glyphicon-refresh' title_key='logging_and_sync'}}
    <span style='display: none;'>{{t "Logging and Sync" key='logging_and_sync'}}</span>
    <div class="form-group">
      <label for="logging" class="col-sm-3 control-label">{{t "Logging" key='logging'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.logging id="logging"}}
            {{t "Log and analyze all Speak Mode actions" key='log_all_actions'}}
          </label>
        </div>
      </div>
    </div>
        
    {{#if pending_preferences.logging}}
      <div class="form-group">
        <div class='col-sm-5 col-sm-offset-3'>
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" disabled=cant_change_private_logging checked=limited_logging id="limited_logging"}}
              {{t "Restrict access to my raw usage logs. NOTE: User account reports will still be available to supervisors with access permissions." key='restrict_log_access'}}
              {{#if cant_change_private_logging}}
                <div class='text-muted'>{{t "Only the user can adjust this setting." key='user_only'}}</div>
              {{/if}}
            </label>
          </div>
        </div>
      </div>
      {{#if limited_logging}}
        {{#if uncomfirmed_pin}}
          <div class="form-group">
            <label for="logging_PIN" class="col-sm-3 control-label">{{t "Logging PIN" key='logging_pin'}}</label>
            <div class='col-sm-5'>
              <p class='form-control-static'>
               {{t "Before you can change log access settings, you must confirm permission using the current logging code. If you have lost or forgotten this code, please contact technical support." key='confirm_logging_code'}}
              </p>
            </div>
            {{#if cant_change_private_logging }}
              <div class='col-sm-5 col-sm-offset-3'>
                <p class='form-control-static text-muted'>
                  {{t "Only the user can adjust these settings." key='user_only_these'}}
                </p>
              </div>
            {{else}}
              <div class='col-sm-2 col-sm-offset-3'>
                {{input type='text' value=logging_code_check class='form-control' placeholder="Log PIN"}}
              </div>
              <div class='col-sm-2'>
                <button type='button' {{action 'check_logging_code'}} disabled={{pin_status.checking}} class='btn btn-default'>
                  {{#if pin_status.checking}}
                    {{t "Checking PIN..." key='checking_pin'}}
                  {{else if pin_status.error}}
                    {{t "Error Checking PIN" key='error_checking_pin'}}
                  {{else if pin_status.wrong}}
                    {{t "Invalid PIN" key='invalid_pin'}}
                  {{else}}
                    {{t "Check PIN" key='check_logging_code'}}
                  {{/if}}
                </button>
              </div>
            {{/if}}
          </div>
        {{else}}
          <div class="form-group">
            <label for="logging_cutoff" class="col-sm-3 control-label">{{t "Logging Cutoff" key='logging_cutoff'}}</label>
            <div class='col-sm-5'>
              <div>
                {{bound-select disabled=cant_change_private_logging select_class="form-control" select_id="external_links" content=cutoffsList selection=pending_preferences.logging_cutoff action=(action (mut pending_preferences.logging_cutoff)) }}
              </div>
              {{#if cant_change_private_logging}}
                <div class='text-muted'>{{t "Only the user can adjust this setting." key='user_only'}}</div>
              {{/if}}
            </div>
          </div>
          <div class="form-group">
            <label for="logging_pin" class="col-sm-3 control-label">{{t "Logging PIN" key='logging_pin"'}}</label>
            <div class='col-sm-5'>
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" disabled=cant_change_private_logging checked=logging_pin id="logging_code"}}
                  {{t "Only allow changes to my logging preferences, and temporary access to all my logs, with a PIN" key='restrict_log_access_by_pin'}}
                  {{#if cant_change_private_logging}}
                    <div class='text-muted'>{{t "Only the user can adjust this setting." key='user_only'}}</div>
                  {{/if}}
                </label>
              </div>
              {{#if logging_pin}}
                {{#if cant_change_private_logging}}
                {{else}}
                  <div>
                    {{input type='text' value=pending_preferences.logging_code class='form-control' placeholder="Set/Change a Log PIN"}}
                  </div>
                  {{#if pending_preferences.logging_code}}
                    <div class='text-danger'>{{t "NOTE: Remember this code! Once it has been set it can only be changed by remembering the current code, or by contacting technical support." key='logging_code_had_to_recover'}}</div>
                  {{/if}}
                {{/if}}
              {{/if}}
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" disabled=cant_change_private_logging checked=pending_preferences.private_logging id="private_logging"}}
                  {{t "Completely Restrict Data Log Access outside this login (includes supervisors, support, integrations & community summaries)." key='completely_restrict_log_access'}}
                  {{#if cant_change_private_logging}}
                    <div class='text-muted'>{{t "Only the user can adjust this setting." key='user_only'}}</div>
                  {{/if}}
                </label>
              </div>
            </div>
          </div>
        {{/if}}
      {{/if}}
      <div class="form-group">
        <label class="col-sm-3 control-label">
          {{t "Logging Opt-In" key='logging_opt_in'}}
        </label>
        <div class='col-sm-5'>
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.allow_log_reports id="allow_log_reports"}}
              {{t "Allow anonymized log data to be used for AAC community and research purposes (unused accounts will be kept longer when this is enabled)" key='allow_log_reports'}}
            </label>
          </div>
          {{#if pending_preferences.allow_log_reports}}
            <div class="checkbox big_checkbox">
              <label>
                {{input type='checkbox' checked=pending_preferences.allow_log_publishing}}
                {{t "Allow anonymized logs to be included in public data sets for automated research and analysis" key='allow_publishing'}}
              </label>
            </div>
          {{/if}}
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.geo_logging id="geo_logging"}}
              {{t "Include geolocation in Speak Mode logs" key='include_geo_in_logs'}}
            </label>
          </div>
        </div>
      </div>
    {{else}}
      {{#if model.permissions.delete}}
        <div class="form-group">
          <div class='col-sm-5 col-sm-offset-3'>
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.never_delete id="never_delete"}}
                {{t "Never delete this account, even if it hasn't been used in a long time" key='never_delete'}}
              </label>
            </div>
            <div style="margin-top: 10px;">
              <button type="button" class='btn btn-default' {{action "delete_logs"}}>{{t "Delete all stored logs" key='delete_all_logs'}}</button>
            </div>
          </div>
        </div>
      {{/if}}
    {{/if}}
    <div class="form-group">
      <div class="col-sm-5 col-sm-offset-3">
        <p class='form-control-static'>
          {{t "NOTE: When logging is enabled, anonymous usage data will be sent to Google services when generating report charts. When logging is disabled, goal tracking and badge awards will not update since no data will be logged." key='logging_uses_google'}}
        </p>
      </div>
    </div>
    <div class="form-group">
      <label for="cookies" class="col-sm-3 control-label">{{t "Analytics" key='analytics'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.cookies id="cookies"}}
            {{t "%app_name% can track my actions and pageviews for internal purposes like error handling, improving features and tracking trends" key='allow_cookies_checkbox'}}
          </label>
        </div>
      </div>
    </div>
    {{#unless advanced}}
    <div class="form-group">
      <div class="col-sm-5 col-sm-offset-3">
        <a href="#" {{action 'toggle_advanced'}}>{{t "more options" key='more_options'}}</a>
      </div>
    </div>
    {{/unless}}
    <div class="form-group">
      <label for="auto_sync" class="col-sm-3 control-label">{{t "Auto-Sync" key='auto_sync'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.device.auto_sync id="auto_sync"}}
            {{t "Automatically Sync this device if online and there are changes to boards" key='auto_sync_if_changes_and_online'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="skip_supervisee_sync" class="col-sm-3 control-label">{{t "Syncing" key='syncing'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.skip_supervisee_sync id="skip_supervisee_sync"}}
            {{t "Don't sync boards for my supervisors, only sync my boards" key='skip_supervisee_sync'}}
          </label>
        </div>
      </div>
    </div>
  {{/preference-box}}
  {{#preference-box title="Startup and Extras" glyph='glyphicon glyphicon-play-circle' title_key='startup_and_extras'}}
    <span style='display: none;'>{{t "Startup and Extras" key='startup_and_extras'}}</span>
    {{#if fullscreen_capable}}
      <div class="form-group">
        <label for="fullscreen" class="col-sm-3 control-label">{{t "Full Screen" key='full_screen'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.fullscreen id="fullscreen"}}
              {{t "Launch Full Screen when entering Speak Mode" key='full_screen_speak_mode'}}
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="auto_home_return" class="col-sm-3 control-label">{{t "On Vocalize" key='on_vocalize'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.clear_on_vocalize id="clear_on_vocalize"}}
            {{t "Automatically clear the current utterance after vocalization" key='clear_on_vocalize'}}
          </label>
        </div>
      </div>
      <div class="col-sm-5 col-sm-offset-3">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.repair_on_vocalize id="repair_on_vocalize"}}
            {{t "Always open the \"Repairs\" window when hitting the vocalization box" key='repair_on_vocalize'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="utterance_interruptions" class="col-sm-3 control-label">{{t "Self-Interrupting" key='utterance_interruptions'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.utterance_interruptions id="utterance_interruptions"}}
            {{t "Interrupt any running speech or audio when the vocalization box is selected" key='enable_utterance_interruptions'}}
          </label>
        </div>
      </div>
      <div class="col-sm-5 col-sm-offset-3">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.prevent_utterance_repeat id="prevent_utterance_repeat"}}
            {{t "Don't interrupt the vocalization box when it is hit more than once" key='prevent_utterance_repeat'}}
          </label>
        </div>
      </div>
      <div class="col-sm-5 col-sm-offset-3">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.prevent_button_interruptions id="prevent_button_interruptions"}}
            {{t "Don't interrupt held buttons when another held button is selected" key='prevent_button_interruptions'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="battery_sounds" class="col-sm-3 control-label">{{t "Battery Alerts" key='battery_alerts'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.battery_sounds id="battery_sounds"}}
            {{t "Play sounds for low/fully-charged battery" key='play_battery_sounds'}}
          </label>
        </div>
      </div>
    </div>
    {{#if wakelock_capable}}
      <div class="form-group">
        <label for="wakelock" class="col-sm-3 control-label">{{t "Screen Wake" key='screen_wake'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.wakelock id="wakelock"}}
              {{t "Keep the screen awake when in Speak Mode on this device" key='wakelock_speak_mode'}}
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="speak_on_speak_mode" class="col-sm-3 control-label">{{t "Speak Mode" key='speak_mode'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.speak_on_speak_mode id="speak_on_speak_mode"}}
            {{t "Speak a phrase when entering Speak Mode to warm up the speech engine" key='speak_on_speak_mode'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="board_jump_delay" class="col-sm-3 control-label">{{t "On Load, Prevent Selection For" key='board_jump_delay'}}</label>
      <div class="col-sm-3">
        <div class="input-group">
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.board_jump_delay"}}>-</button>
          </span>
          {{input value=pending_preferences.board_jump_delay class="form-control" id="board_jump_delay" placeholder="500"}}
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.board_jump_delay"}}>+</button>
          </span>
        </div>
      </div>
      <div class="col-sm-2">
        <p class="form-control-static">{{t "milliseconds" key='milliseconds'}}</p>
      </div>
    </div>
    <div class="form-group">
      <label for="external_links" class="col-sm-3 control-label">{{t "External Links" key='external_links'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="external_links" content=externalLinksList selection=pending_preferences.external_links action=(action (mut pending_preferences.external_links)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="sharing" class="col-sm-3 control-label">{{t "Sharing" key='sharing'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.sharing id="sharing"}}
            {{t "Show sharing options in speak menu for sharing to social networks" key='allow_sharing'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="auto_capitalize" class="col-sm-3 control-label">{{t "Auto-Capitalize" key='auto_capitalize'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.auto_capitalize id="auto_capitalize"}}
            {{t "Automatically capitalize new sentences in the vocalization box" key='auto_capitalize_sentences'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="external_keyboard" class="col-sm-3 control-label">{{t "External Keyboard" key='external_keyboard'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.device.external_keyboard id="external_keyboard"}}
            {{t "Allow adding to the vocalization box from an external keyboard on this device" key='allow_external_keyboard'}}
          </label>
        </div>
      </div>
      {{#if native_keyboard_available}}
        {{#if app_state.feature_flags.native_keyboard}}
          <div class='col-sm-5 col-sm-offset-3'>
            <div class='checkbox big_checkbox'>
              <label>
                {{input type="checkbox" checked=pending_preferences.device.prefer_native_keyboard id='native_keyboard'}}
                {{t "Try to use the native on-screen keyboard when available" key='prefer_native_keyboard'}}
              </label>
            </div>
          </div>
        {{/if}}
      {{/if}}
    </div>

    <div class="form-group">
      <label for="folder_icons" class="col-sm-3 control-label">{{t "Folder Icons" key='folder_icons'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.folder_icons id="folder_icons"}}
            {{t "Show folder icons instead of colored corners for buttons that link to other boards" key='show_folder_icons'}}
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="new_index" class="col-sm-3 control-label">{{t "New Dashboard" key='new_dashboard'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.new_index}}
            {{t "Use the New Dashboard Layout" key='new_index'}}
          </label>
        </div>
      </div>
    </div>
  {{/preference-box}}
  {{#preference-box title="Core, Phrases and Modeling" glyph='glyphicon glyphicon-comment' title_key='core_phrases_and_modeling'}}
    <span style='display: none;'>{{t "Core, Phrases and Modeling" key='core_phrases_and_modeling'}}</span>
    {{#if app_state.feature_flags.remote_modeling}}
      <div class="form-group">
        <label for="remote_modeling" class="col-sm-3 control-label">{{t "Remote Modeling" key='remote_modeling'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.remote_modeling}}
              {{t "Enable remote modeling so supervisors can request a connection to your device remotely" key='enable_remote_modeling'}}
            </label>
          </div>
        </div>
      </div>
      {{#if pending_preferences.remote_modeling}}
        <div class="form-group">
          <label for="" class="col-sm-3 control-label"></label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.remote_modeling_auto_follow}}
                {{t "Automatically allow supervisors to remotely follow activity in real-time" key='enable_remote_modeling_auto_follow'}}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="" class="col-sm-3 control-label"></label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.remote_modeling_auto_accept}}
                {{t "Automatically allow supervisors to remotely initiate a modeling session (otherwise requires manual approval)" key='enable_remote_modeling_auto_accept'}}
              </label>
            </div>
          </div>
        </div>
      {{/if}}
    {{/if}}
    <div class="form-group">
      <label for="core_word_list" class="col-sm-3 control-label">{{t "Core Word List" key='core_word_list'}}</label>
      <div class='col-sm-6'>
        {{#if core_lists.loading}}
          <p class='form-control-static'>{{t "Loading..." key='loading'}}</p>
        {{else if core_lists.error}}
          <p class='form-control-static'>{{t "Error loading core word list" key='error_loading_core_word_list'}}</p>
        {{else if core_lists}}
          <p class='form-control-static'><em>{{t "Core words are the most common words in a language, and often express multiple intents or meanings. The following list of words will be marked as \"core\" (as opposed to \"fringe\") for this user." key='core_words_explainer'}}</em></p>
          <div style='max-height: 100px; overflow: auto; padding: 5px 15px; border-top: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-bottom: 5px;'>
            {{raw_user_core_list}}
          </div>
          <button type='button' {{action 'modify_core'}} class='btn btn-default'>{{t "Modify Core Word List" key='modify_core_word_list'}}</button>
          <span style='padding-left: 10px;'>
            {{t "core word" count=core_lists.for_user.length}}
            {{t "listed" key='listed'}}
          </span>
        {{else}}
          <p class='form-control-static'>{{t "None available" key='none_available'}}</p>
        {{/if}}
      </div>
    </div>
    {{#unless advanced}}
      <div class="form-group">
        <div class="col-sm-5 col-sm-offset-3">
          <a href="#" {{action 'toggle_advanced'}}>{{t "more options" key='more_options'}}</a>
        </div>
      </div>
    {{else}}
      <div class="form-group">
        <label for="substitutions" class="col-sm-3 control-label">{{t "Phrase Substitutions" key='substitutions'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox" style='margin-bottom: 5px;'>
            <label>
              {{input type="checkbox" checked=pending_preferences.substitute_contractions id="substitute_contractions"}}
              {{t "Automatically substitute common contractions" key='substitute_contractions'}}
            </label>
          </div>
          {{textarea class='form-control' value=substitution_string placeholder="additional substitutions, one per line (stop break=I need to take a break)"}}
        </div>
      </div>
      {{#if core_lists.for_user}}
        <div class="form-group">
          <label for="core_word_list" class="col-sm-3 control-label">{{t "Requested Buttons" key='requested_buttons'}}</label>
          <div class='col-sm-6'>
            <p class='form-control-static'><em>{{t "Communicators and supporters can request that phrases or words be added to a communicator's vocabulary set. Those requests are listed here." key='requested_phrases_explainer'}}</em></p>
            <div style='max-height: 100px; overflow: auto; padding: 5px 15px; border-top: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-bottom: 5px;'>
              {{#if requested_phrases}}
                {{#each requested_phrases as |phrase|}}
                  <div style='padrequested_phrase_changesding-left: 10px;'>
                    {{#if phrase.used}}<span class='glyphicon glyphicon-ok'></span>{{/if}}
                    {{phrase.text}}
                    <a href="#" {{action 'remove_phrase' phrase.text}} style='padding-left: 5px; font-size: 12px;'>{{t "remove" key='remove_lower'}}</a>
                  </div>
                {{/each}}
              {{else}}
                <p>{{t "No requested phrases" key='no_requested_phrases'}}</p>
              {{/if}}
            </div>
          </div>
          <div class='col-sm-3 col-sm-offset-3'>
            {{input type='text' class='form-control' value=new_phrase placeholder="request additional phrase"}}
          </div>
          <div class='col-sm-1'>
            <button type='button' class='btn btn-default' {{action 'add_phrase'}}>{{t "Add" key='add'}}</button>
          </div>
        </div>
      {{/if}}
      <div class="form-group">
        <label for="phrase_categories" class="col-sm-3 control-label">{{t "Saved Phrase Types" key='saved_phrase_types'}}</label>
        <div class="col-sm-5">
          {{input class='form-control' type='text' value=phrase_categories_string placeholder="list, of, phrase, categories"}}
          <em>{{t "CoughDrop has \"Quick\" and \"Journal\" categories by default, but you can list more categories to add here." key='phrase_categories_explainer'}}</em><br/>
          <button class='btn btn-default' {{action 'phrases'}}>{{t "Manage Phrases" key='manage_phrases'}}</button>
        </div>
      </div>
      <div class="form-group">
        <label for="dwell_modeling" class="col-sm-3 control-label">{{t "Modeling" key='modeling'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.multi_touch_modeling id="multi_touch_modeling"}}
              {{t "Mark two-finger touches as modeling events, not user selections" key='multi_touch_modeling'}}
            </label>
          </div>
        </div>
      </div>
    {{/unless}}
  {{/preference-box}}
  {{#preference-box title="Sidebar and Shortcuts" glyph='glyphicon glyphicon-link' title_key='sidebar_and_shortcuts'}}
    <span style='display: none;'>{{t "Sidebar and Shortcuts" key='sidebar_and_shortcuts'}}</span>
    <div class="form-group">
      <label for="quick_sidebar" class="col-sm-3 control-label">{{t "Quick Actions" key='quick_actions'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.quick_sidebar id="quick_sidebar"}}
            {{t "Always show quick actions sidebar" key='always_show_quick_sidebar'}}
          </label>
        </div>
        {{#unless pending_preferences.quick_sidebar}}
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.disable_quick_sidebar id="disable_quick_sidebar"}}
              {{t "Remove quick actions sidebar completely" key='never_show_quick_sidebar'}}
            </label>
          </div>
        {{else}}
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.lock_quick_sidebar id="lock_quick_sidebar"}}
              {{t "Don't allow hiding quick actions sidebar" key='never_hide_quick_sidebar'}}
            </label>
          </div>
        {{/unless}}
      </div>
    </div>
    {{#unless pending_preferences.disable_quick_sidebar}}
      <div class="form-group">
        <label class="col-sm-3 control-label">{{t "Links and Buttons" key='links_and_buttons'}}</label>
        <div class="col-sm-5">
          {{#unless editing_sidebar}}
            <button class='btn btn-default' {{action 'edit_sidebar'}}>{{t "Edit Sidebar Links and Buttons" key='edit_sidebar_links_and_buttons'}}</button><br/>
          {{else}}
            <p class="form-control-static">
              <strong>Active</strong>
            </p>
            <ul class="list-group">
              {{#each active_sidebar_options as |option|}}
                <li class="list-group-item" style="height: 60px;">
                  <img src={{option.image}} style="float: left; height: 40px; max-width: 40px;"  {{action "sidebar_button_settings" option}}/>
                  <span style="float: right; margin-top: 5px;">
                    <button class='btn btn-default btn-sm' title={{t "move up" key='move_up'}} {{action 'move_sidebar_button' option 'up'}} style={{if option.top 'visibility: hidden;' ''}}><span class='glyphicon glyphicon-arrow-up'></span></button>
                    <button class='btn btn-default btn-sm' title={{t "move down" key='move_down'}} {{action 'move_sidebar_button' option 'down'}}style={{if option.bottom 'visibility:hidden;' ''}}><span class='glyphicon glyphicon-arrow-down'></span></button>
                    <button class='btn btn-default btn-sm' title={{t "remove" key='remove_lower'}} {{action 'move_sidebar_button' option 'delete'}}><span class='glyphicon glyphicon-trash'></span></button>
                  </span>
                  <span style="cursor: pointer; margin-top: 10px; display: inline-block; margin-left: 5px;" {{action "sidebar_button_settings" option}}>
                    {{#if option.alert}}
                      <span class="glyphicon glyphicon-bullhorn"></span>
                    {{else if option.home_lock}}
                      <span class="glyphicon glyphicon-home"></span>
                    {{/if}}
                    {{#if option.highlight_type}}
                      <span class="glyphicon glyphicon-map-marker"></span>
                    {{/if}}
                    {{option.name}}
                  </span>
                  <span style="clear: both;"></span>
                </li>
              {{/each}}
            </ul>
            {{#if disabled_sidebar_options_or_prior_sidebar_boards}}
              <p class="form-control-static">
                <strong>Disabled</strong>
              </p>
              <ul class="list-group">
                {{#each disabled_sidebar_options as |option|}}
                  <li class="list-group-item" style="height: 60px;">
                    <img src={{option.image}} style="float: left; height: 40px; max-width: 40px;"/>
                    <span style="float: right; margin-top: 5px;">
                      <button class='btn btn-default btn-sm' title={{t "restore" key='restore'}} {{action 'move_sidebar_button' option 'restore'}} style={{if option.top 'visibility: hidden;' ''}}><span class='glyphicon glyphicon-arrow-up'></span></button>
                    </span>
                    <span style="margin-top: 10px; display: inline-block; margin-left: 5px;">
                      {{#if option.alert}}
                        <span class="glyphicon glyphicon-bullhorn"></span>
                      {{/if}}
                      {{option.name}}
                    </span>
                    <span style="clear: both;"></span>
                  </li>
                {{/each}}
              </ul>
              {{#if pending_preferences.prior_sidebar_boards}}
                {{#unless include_prior_sidebar_buttons}}
                  <a href="#" {{action 'include_prior_sidebar_buttons'}}>{{t "show prior sidebar links and buttons" key='show_prior_buttons'}}</a>
                {{/unless}}
              {{/if}}
            {{/if}}
            <div>
              <span style='display: inline-block; width: calc(100% - 65px);'>
                {{input type='text' class='form-control' value=new_sidebar_board placeholder="add board key/action"}}
              </span>
              <span style='display: inline-block; width: 60px;'>
                <button class='btn btn-default' {{action 'add_sidebar_board' new_sidebar_board}}>{{t "Add" key='add'}}</button>
              </span>
              {{#if add_sidebar_board_error}}
                <p class='text-danger'>{{add_sidebar_board_error}}</p>
              {{/if}}
            </div>
          {{/unless}}
          <em>{{t "You can add any boards you find by finding them and selecting <span style='white-space: nowrap'>More -> Add to Sidebar</span>" key='add_to_sidebar_hint'}}</em>
        </div>
      </div>
    {{/unless}}
    {{#if advanced}}
      <div class="form-group">
        <label for="enable_tags" class="col-sm-3 control-label">{{t "NFC Tags" key='nfc_tags'}}</label>
        <div class="col-sm-5">
          <p class='form-control-static'>
            {{#if pending_preferences.tag_ids}}
              {{t "tag" count=pending_preferences.tag_ids.length key='n_tags'}} {{t "saved" key='saved'}}
            {{else}}
              {{t "No tags saved" key='no_tags_saved'}}
            {{/if}}
          </p>
          {{#if can_record_tags}}
            <button class='btn btn-default' {{action 'program_tag'}}>{{t "Save New Tag" key='save_new_tag'}}</button>
          {{/if}}
          <button class='btn btn-default' {{action 'clear_nfc_tags'}}>{{t "Clear Saved Tags" key='clear_tags'}}</button>
        </div>
      </div>
    {{else}}
      <div class="form-group">
        <div class="col-sm-5 col-sm-offset-3">
          <a href="#" {{action 'toggle_advanced'}}>{{t "more options" key='more_options'}}</a>
        </div>
      </div>
    {{/if}}
  {{/preference-box}}

  <!-- keyboard shortcuts for actions/phrases, abbreviations/message expansions -->
  <h2 style="margin: 50px 0 20px 0;">{{t "Device Preferences" key='device_preferences'}} ({{pending_preferences.device.name}})</h2>
  {{#preference-box title="Device Layout" glyph='glyphicon glyphicon-th' title_key='device_layout'}}
    <span style='display: none;'>{{t "Device Layout" key='device_layout'}}</span>
    <div class='form-group'>
      <div class='col-sm-5 col-sm-offset-3'>
        {{layout-preview preferences=pending_preferences user=model}}
      </div>
    </div>
    <div class="form-group">
      <label for="vocalization_height" class="col-sm-3 control-label">{{t "Vocalization Box Size" key='vocalization_height'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="vocalization_height" content=vocalizationHeightList selection=pending_preferences.device.vocalization_height action=(action (mut pending_preferences.device.vocalization_height)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="button_spacing" class="col-sm-3 control-label">{{t "Button Spacing" key='button_spacing'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="button_spacing" content=buttonSpacingList selection=pending_preferences.device.button_spacing action=(action (mut pending_preferences.device.button_spacing)) }}
      </div>
    </div>
    {{#if advanced}}
    <div class="form-group">
      <label for="button_border" class="col-sm-3 control-label">{{t "Button Border Size" key='button_border'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="button_border" content=buttonBorderList selection=pending_preferences.device.button_border action=(action (mut pending_preferences.device.button_border)) }}
      </div>
    </div>
    {{/if}}
    <div class="form-group">
      <label for="button_text" class="col-sm-3 control-label">{{t "Button Text Size" key='button_text'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="button_text" content=buttonTextList selection=pending_preferences.device.button_text action=(action (mut pending_preferences.device.button_text)) }}
      </div>
    </div>
    <div class="form-group">
      <label for="button_text_position" class="col-sm-3 control-label">{{t "Button Text Position" key='button_text_position'}}</label>
      <div class="col-sm-5">
        {{bound-select select_class="form-control" select_id="button_text_position" content=buttonTextPositionList selection=pending_preferences.device.button_text_position action=(action (mut pending_preferences.device.button_text_position)) }}
      </div>
    </div>
    {{#if advanced}}
      {{#unless text_only_button_text_position}}
        <div class="form-group">
          <label for="utterance_text_only" class="col-sm-3 control-label">{{t "Vocalization Box Text" key='vocalization_box_text'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.utterance_text_only id="utterance_text_only"}}
                {{t "Show only text in the vocalization box" key='utterance_text_only'}}
              </label>
            </div>
          </div>
        </div>
      {{/unless}}
      <div class="form-group">
        <label for="flipped_override" class="col-sm-3 control-label">{{t "Flipped Vocalization Box" key='flipped_vocalization_box_text'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.flipped_override id="flipped_override"}}
              {{t "Use different size settings for a flipped vocalization box" key='flipped_override'}}
            </label>
          </div>
        </div>
      </div>
      {{#if pending_preferences.device.flipped_override}}
        <div class="form-group">
          <label for="flipped_text" class="col-sm-3 control-label">{{t "Vocalization Box Text Size" key='flipped_text'}}</label>
          <div class="col-sm-5">
            {{bound-select select_class="form-control" select_id="flipped_text" content=buttonTextList selection=pending_preferences.device.flipped_text action=(action (mut pending_preferences.device.flipped_text)) }}
          </div>
        </div>
        <div class="form-group">
          <label for="flipped_height" class="col-sm-3 control-label">{{t "Flipped Box Size" key='flipped_height'}}</label>
          <div class="col-sm-5">
            {{bound-select select_class="form-control" select_id="flipped_height" content=vocalizationHeightList selection=pending_preferences.device.flipped_height action=(action (mut pending_preferences.device.flipped_height)) }}
          </div>
        </div>
      {{/if}}
      <div class="form-group">
        <!-- TODO: shouldn't font be a global preference, not a device preference? -->
        <label for="button_style" class="col-sm-3 control-label">{{t "Button Text Style" key='button_style'}}</label>
        <div class="col-sm-5">
          {{bound-select select_class="form-control" select_id="button_style" content=buttonStyleList selection=pending_preferences.device.button_style action=(action (mut pending_preferences.device.button_style)) }}
          <div class={{text_sample_class}} style="margin-left: 20px; margin-top: 5px;">{{t "This is a Text Sample" key='this_is_a_text_sample'}}</div>
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="always_show_back" class="col-sm-3 control-label">{{t "Back Button" key='back_button'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.device.always_show_back id="always_show_back"}}
            {{t "Always show the Back button in the header (recommended for users with key guards)" key='always_show_back'}}
          </label>
        </div>
      </div>
    </div>
  {{/preference-box}}
  {{#if advanced}}
    {{#preference-box title="Scanning Settings" glyph='glyphicon glyphicon-menu-hamburger' title_key='scanning_settings'}}
      <span style='display: none;'>{{t "Scanning Settings" key='scanning_settings'}}</span>
      <div class="form-group">
        <label for="scanning" class="col-sm-3 control-label">{{t "Scanning" key='scanning'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.scanning id="scanning"}}
              {{t "Enable switch-activated scanning" key='enable_scanning'}}
            </label>
          </div>
        </div>
      </div>
      {{#if pending_preferences.device.scanning}}
        <div class="form-group">
          <label for="scanning_mode" class="col-sm-3 control-label">{{t "Scanning Mode" key='scanning_mode'}}</label>
          <div class="col-sm-5">
            {{bound-select select_class="form-control" select_id="scanning_mode" content=scanningModeList selection=pending_preferences.device.scanning_mode action=(action (mut pending_preferences.device.scanning_mode)) }}
          </div>
        </div>
        {{#if axes_scanning}}
          <div class="form-group">
            <label for="scanning_sweep_speed" class="col-sm-3 control-label">{{t "Scanning Speed" key='scanning_sweep_speed'}}</label>
            <div class="col-sm-5">
              {{bound-select select_class="form-control" select_id="scanning_sweep_speed" content=scanningAxisSpeedList selection=pending_preferences.device.scanning_sweep_speed action=(action (mut pending_preferences.device.scanning_sweep_speed)) }}
            </div>
          </div>
        {{else}}
          {{#if region_scanning}}
            <div class="form-group">
              <label for="scanning_size" class="col-sm-3 control-label">{{t "Scanning Grid of" key='scanning_size'}}</label>
              <div class="col-sm-2">
                <div class="input-group">
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.scanning_region_rows"}}>-</button>
                  </span>
                  {{input value=pending_preferences.device.scanning_region_rows class="form-control" id="scanning_region_rows" placeholder="rows"}}
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.scanning_region_rows"}}>+</button>
                  </span>
                </div>
              </div>
              <div class="col-sm-1">
                <p class="form-control-static">
                  {{t "by" key='by'}}
                </p>
              </div>
              <div class="col-sm-2">
                <div class="input-group">
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.scanning_region_columns"}}>-</button>
                  </span>
                  {{input value=pending_preferences.device.scanning_region_columns class="form-control" id="scanning_region_columns" placeholder="cols"}}
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.scanning_region_columns"}}>+</button>
                  </span>
                </div>
              </div>
            </div>
          {{/if}}
        {{/if}}
        <div class="form-group">
          <label for="scanning_skip_header" class="col-sm-3 control-label">{{t "Scanning Header" key='scanning_header'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.scanning_skip_header id="scanning_skip_header"}}
                {{t "Skip Header when scanning" key='scanning_skip_header'}}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="scanning_wait_for_input" class="col-sm-3 control-label">{{t "Scanning Start" key='auto_start'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.scanning_wait_for_input id="scanning_wait_for_input"}}
                {{t "Don't start scanning until a switch is activated" key='scanning_wait_for_input'}}
              </label>
            </div>
          </div>
        </div>
        {{#if axes_scanning}}
        {{else}}
          <div class="form-group">
            <label for="scanning_interval" class="col-sm-3 control-label">{{t "Scanning Interval" key='scanning_interval'}}</label>
            <div class="col-sm-3">
              <div class="input-group">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.scanning_interval"}}>-</button>
                </span>
                {{input value=pending_preferences.device.scanning_interval class="form-control" id="scanning_interval" placeholder="1000"}}
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.scanning_interval"}}>+</button>
                </span>
              </div>
            </div>
            <div class="col-sm-2">
              <p class="form-control-static">{{t "milliseconds" key='milliseconds'}}</p>
            </div>
            <div class='col-sm-5 col-sm-offset-3'>
              <div class='text-muted'>{{t "(enter 0 to prevent auto-scanning)" key='zero_to_prevent_scanning' }}</div>
            </div>
          </div>
          <div class="form-group">
            <label for="scanning_prompt" class="col-sm-3 control-label">{{t "Scanning Prompt" key='scanning_prompt'}}</label>
            <div class="col-sm-5">
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" checked=pending_preferences.device.scanning_prompt id="scanning_prompt"}}
                  {{t "Speak Audio Prompts While Scanning" key='speak_audio_prompts'}}
                </label>
              </div>
            </div>
          </div>
          {{#if pending_preferences.device.scanning_prompt}}
            <div class="form-group">
              <label for="scanning_voice" class="col-sm-3 control-label">{{t "Scanning Voice" key='scanning_voice'}}</label>
              <div class="col-sm-5">
                <div class="checkbox big_checkbox">
                  <label>
                    {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_scanning id="scanning_voice"}}
                    {{t "Use My Secondary Voice for Audio Prompts" key='use_scanning_voice'}}
                  </label>
                  {{#if pending_preferences.device.alternate_voice.for_scanning}}
                    <div style='margin-left: 20px;'><em>{{t "secondary voice options are available farther down" key='secondary_options_below'}}</em></div>
                  {{/if}}
                </div>
              </div>
            </div>
          {{/if}}
        {{/if}}
        <div class="form-group">
          <label for="scanning_select_on_any_event" class="col-sm-3 control-label">{{t "Scanning Pseudo-Switch" key='psuedo-switch'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.scanning_select_on_any_event id="scanning_select_on_any_event"}}
                {{t "Select on Any Key Press or Screen Touch/Click" key='scanning_select_on_any_event'}}
              </label>
            </div>
          </div>
        </div>
        {{#if pending_preferences.device.scanning_select_on_any_event}}
          {{#unless axes_scanning}}
            <label for="scanning_screen_buttons" class="col-sm-3 control-label">{{t "Psuedo-Switch Screen Buttons" key='psuedo-switch_buttons'}}</label>
            <div class="form-group">
              <div class="col-sm-2">
                <p class="form-control-static"><label for="scan_left">{{t "Left Half" key='left_half'}}</label></p>
                {{bound-select select_class="form-control" select_id="scan_left" content=scan_pseudo_options selection=pending_preferences.device.scanning_left_screen_action action=(action (mut pending_preferences.device.scanning_left_screen_action)) }}
              </div>
              <div class="col-sm-2">
                <p class="form-control-static"><label for="scan_right">{{t "Right Half" key='right_half'}}</label></p>
                {{bound-select select_class="form-control" select_id="scan_right" content=scan_pseudo_options selection=pending_preferences.device.scanning_right_screen_action action=(action (mut pending_preferences.device.scanning_right_screen_action)) }}
              </div>
            </div>
          {{/unless}}
        {{else}}
          <div class="form-group">
            <label for="scanning_select_keycode" class="col-sm-3 control-label">{{t "Scanning \"Select\" Key" key='scanning_select_keycode'}}</label>
            <div class="col-sm-5">
              <label style="width: 50px;">
                {{key-code-text-field id='scanning_select_keycode' class='form-control' value=pending_preferences.device.scanning_select_keycode action=(action (mut pending_preferences.device.scanning_select_keycode)) placeholder='hit any key'}}
              </label>
              &nbsp;{{select_keycode_string}}
            </div>
          </div>
          {{#unless axes_scanning}}
            <div class="form-group">
              <label for="scanning_next_keycode" class="col-sm-3 control-label">{{t "Scanning \"Next\" Key" key='scanning_next_keycode'}}</label>
              <div class="col-sm-5">
                <label style="width: 50px;">
                  {{key-code-text-field id='scanning_next_keycode' class='form-control' value=pending_preferences.device.scanning_next_keycode placeholder='hit any key'}}
                </label>
                &nbsp;{{next_keycode_string}}
              </div>
            </div>
            <div class="form-group">
              <label for="scanning_prev_keycode" class="col-sm-3 control-label">{{t "Scanning \"Previous\" Key" key='scanning_prev_keycode'}}</label>
              <div class="col-sm-5">
                <label style="width: 50px;">
                  {{key-code-text-field id='scanning_prev_keycode' class='form-control' value=pending_preferences.device.scanning_prev_keycode placeholder='hit any key'}}
                </label>
                &nbsp;{{prev_keycode_string}}
              </div>
            </div>
          {{/unless}}
          <div class="form-group">
            <label for="scanning_cancel_keycode" class="col-sm-3 control-label">{{t "Scanning \"Cancel\" Key" key='scanning_cancel_keycode'}}</label>
            <div class="col-sm-5">
              <label style="width: 50px;">
                {{key-code-text-field id='scanning_cancel_keycode' class='form-control' value=pending_preferences.device.scanning_cancel_keycode placeholder='hit any key'}}
              </label>
              &nbsp;{{cancel_keycode_string}}
            </div>
          </div>
        {{/if}}
        {{#unless axes_scanning}}
          <div class="form-group">
            <label for="scanning_auto_select" class="col-sm-3 control-label">{{t "Scanning Auto-Select" key='scanning_auto_select'}}</label>
            <div class="col-sm-5">
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" checked=pending_preferences.device.scanning_auto_select id="scanning_auto_select"}}
                  {{t "Select after the interval if no \"Next\" button hit" key='auto_select_after_delay'}}
                </label>
              </div>
            </div>
          </div>
        {{/unless}}
        <div class="form-group">
          <label for="scan_modeling" class="col-sm-3 control-label">{{t "Scanning Modeling" key='scan_modeling'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.scan_modeling id="scan_modeling"}}
                {{t "Mark clicks/touches as modeling events, not user selections" key='touch_as_modeling'}}
              </label>
            </div>
          </div>
        </div>
      {{/if}}
    {{/preference-box}}
    {{#preference-box title="Dwell/Eye Tracking" glyph='glyphicon glyphicon-eye-open' title_key='dwell_eye_tracking'}}
      <span style='display: none;'>{{t "Dwell/Eye Tracking" key='dwell_eye_tracking'}}</span>
      <div class="form-group">
        <label for="eyegaze" class="col-sm-3 control-label">{{t "Dwell/Eye Tracking" key='dwell_eye_tracking'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            {{#if eyegaze_or_dwell_capable}}
              <label>
                {{input type="checkbox" checked=pending_preferences.device.dwell id="eyegaze"}}
                {{t "Enable dwell/eye-tracking" key='eyegaze'}}
              </label>
            {{else}}
              <em>{{t "Eye-gaze or dwell tracking is a beta feature on Windows or other cursor-based system, please contact support for more information" key='eye_tracking_beta'}}</em>
            {{/if}}
          </div>
        </div>
      </div>
      {{#if pending_preferences.device.dwell}}
        <div class="form-group">
          <label for="dwell_type" class="col-sm-3 control-label">{{t "Dwell Type" key='dwell_type'}}</label>
          <div class="col-sm-3">
            {{bound-select select_class="form-control" select_id="scanning_mode" content=dwellList selection=pending_preferences.device.dwell_type action=(action (mut pending_preferences.device.dwell_type)) }}
          </div>
          <div class="col-sm-2">
            <button class='btn btn-default' {{action "test_dwell"}} style='width: 100%;'>
              {{#if testing_dwell}}
                {{t "Stop Tracking" key='stop_test_dwell'}}
              {{else}}
                {{t "Test Dwell Tracking" key='test_dwell'}}
              {{/if}}
            </button>
          </div>
          {{#if eyegaze_type}}
            {{#if calibratable}}
              <div class="col-sm-2">
                <button class='btn btn-default' {{action "calibrate"}} style='width: 100%; margin-bottom: 3px;'>{{t "Calibrate Tracker" key='calibrate'}}</button>
              </div>
            {{/if}}
          {{/if}}
          {{#if testing_dwell}}
            <div class="col-sm-5 col-sm-offset-3">
              {{dwell-tracker user=model preferences=pending_preferences type=pending_preferences.device.dwell_type}}
            </div>
          {{/if}}
        </div>
        {{#if eyegaze_type}}
          <div class="form-group">
            <div class="col-sm-5 col-sm-offset-3">
              {{#if ios_app}}
                <p class="form-control-static"><em>{{t "The built-in features of Apple Face ID support limited eye gaze control. This eye gaze is not as accurate as dedicated eye-tracking hardware, but combined with limited head movement it may be sufficient for some communicators." key='ios_eye_tracking'}}</em></p>
              {{else}}
                <p class="form-control-static"><em>{{t "Many eye trackers will work in %app_name% using cursor control mode or using a built-in integrate (EyeX, Eyegaze Edge). If no native trackers are available then a lower-quality camera-based eye tracker can be used." key='supported_eye_trackers'}}</em></p>
                {{#unless native_eyegaze_capable}}
                  <p class='form-control-static text-danger'>
                    {{t "Integrated eye trackers will only work in the" key='eyegaze_windows_only_1'}}
                    {{#link-to 'download'}}{{t "Windows app" key='windows_app'}}{{/link-to}}.
                    {{t "If your eye tracker can control the mouse cursor, you can try dwell tracking instead." key='eyegaze_windows_only_2'}}
                  </p>
                {{/unless}}
              {{/if}}
            </div>
          </div>
        {{else if head_tracking_type}}
          <div class="form-group">
            <div class="col-sm-5 col-sm-offset-3">
              {{#if ios_app}}
                <p class="form-control-static"><em>{{t "The built-in features of Apple Face ID support native head tracking. For devices without Face ID a camera-based head tracker will be used." key='ios_head_tracking'}}</em></p>
              {{else}}
                <p class="form-control-static"><em>{{t "Some devices support hardware-optimized head tracking as part of AR toolsets, for all other devices a camera-based head tracker will be used." key='supported_head_trackers'}}</em></p>
              {{/if}}
            </div>
          </div>
        {{/if}}
        {{#if arrow_or_head_dwell}}
          {{#if head_dwell}}
            <div class="form-group">
              <label for="dwell_tilt_sensitivity" class="col-sm-3 control-label">{{t "Dwell Head Sensitivity" key='dwell_tilt_sensitivity'}}</label>
              <div class="col-sm-3">
                {{bound-select select_class="form-control" select_id="dwell_tilt_sensitivity" content=dwellTiltList selection=pending_preferences.device.dwell_tilt_sensitivity action=(action (mut pending_preferences.device.dwell_tilt_sensitivity)) }}
              </div>
            </div>

            <div class="form-group">
              <label for="dwell_head_pointer" class="col-sm-3 control-label">{{t "Dwell Head Pointer" key='dwell_head_pointer'}}</label>
              <div class="col-sm-5">
                <div class="checkbox big_checkbox">
                  <label>
                    {{input type="checkbox" checked=pending_preferences.device.dwell_head_pointer id="dwell_head_pointer"}}
                    {{t "Use head position as a direct pointer" key='use_dwell_head_pointer'}}
                  </label>
                </div>
              </div>
            </div>          
          {{/if}}
          {{#unless pending_preferences.device.dwell_head_pointer}}
            <div class="form-group">
              <label for="dwell_arrow_speed" class="col-sm-3 control-label">{{t "Dwell Cursor Speed" key='dwell_arrow_speed'}}</label>
              <div class="col-sm-3">
                {{bound-select select_class="form-control" select_id="dwell_arrow_speed" content=arrowSpeedList selection=pending_preferences.device.dwell_arrow_speed action=(action (mut pending_preferences.device.dwell_arrow_speed)) }}
              </div>
            </div>
          {{/unless}}
        {{else}}
          <div class="form-group">
            <label for="dwell_cursor" class="col-sm-3 control-label">{{t "Dwell Cursor" key='dwell_cursor'}}</label>
            <div class="col-sm-5">
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" checked=pending_preferences.device.dwell_cursor id="dwell_cursor"}}
                  {{t "Show icon at current dwell location" key='show_dwell_cursor'}}
                </label>
              </div>
            </div>
          </div>
        {{/if}}
        {{#if pending_preferences.device.dwell_cursor}}
          <div class="form-group">
            <label for="dwell_icon_option" class="col-sm-3 control-label">{{t "Dwell Cursor Icon" key='dwell_icon'}}</label>
            <div class="col-sm-3">
              {{bound-select select_class="form-control" select_id="dwell_icon_option" content=dwellIconList selection=pending_preferences.device.dwell_icon action=(action (mut pending_preferences.device.dwell_icon)) }}
            </div>
            <div class='col-sm-1'>
              <div id='dwell_icon' style='z-index: 1;' class={{dwell_icon_class}}></div>
            </div>
          </div>
        {{/if}}
        <div class="form-group">
          <label for="dwell_type" class="col-sm-3 control-label">{{t "Dwell Selection" key='dwell_selection'}}</label>
          <div class="col-sm-3">
            {{bound-select select_class="form-control" select_id="dwell_selection" content=dwellSelectList selection=pending_preferences.device.dwell_selection action=(action (mut pending_preferences.device.dwell_selection)) }}
          </div>
        </div>
        {{#if button_dwell}}
          <div class="form-group">
            <label for="scanning_select_keycode" class="col-sm-3 control-label">{{t "Dwell \"Select\" Key" key='dwell_select_keycode'}}</label>
            <div class="col-sm-5">
              <label style="width: 50px;">
                {{key-code-text-field id='scanning_select_keycode' class='form-control' value=pending_preferences.device.scanning_select_keycode action=(action (mut pending_preferences.device.scanning_select_keycode)) placeholder='hit any key'}}
              </label>
              &nbsp;{{select_keycode_string}}
            </div>
          </div>
        {{else if expression_select}}
          <div class="form-group">
            <label for="select_expression" class="col-sm-3 control-label">{{t "Dwell Expression" key='select_expression'}}</label>
            <div class="col-sm-3">
              {{bound-select select_class="form-control" select_id="select_expression" content=expressionList selection=pending_preferences.device.select_expression action=(action (mut pending_preferences.device.select_expression)) }}
            </div>
          </div>
        {{else}}
          <div class="form-group">
            <label for="dwell_no_cutoff" class="col-sm-3 control-label">{{t "Dwell Cutoff" key='dwell_cutoff'}}</label>
            <div class="col-sm-5">
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" checked=pending_preferences.device.dwell_no_cutoff id="dwell_no_cutoff"}}
                  {{t "Keep dwell targeting even if cursor stops moving" key='dwell_no_cutoff'}}
                </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="dwell_duration" class="col-sm-3 control-label">{{t "Dwell Time" key='dwell_duration'}}</label>
            <div class="col-sm-3">
              <div class="input-group">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.dwell_duration"}}>-</button>
                </span>
                {{input value=pending_preferences.device.dwell_duration class="form-control" id="dwell_duration" placeholder="1000"}}
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.dwell_duration"}}>+</button>
                </span>
              </div>
            </div>
            <div class="col-sm-4">
              <p class="form-control-static">{{t "milliseconds to select a target" key='milliseconds_to_select'}}</p>
            </div>
          </div>
          <div class="form-group">
            <label for="dwell_delay" class="col-sm-3 control-label">{{t "Dwell Selection Delay" key='dwell_delay'}}</label>
            <div class="col-sm-3">
              <div class="input-group">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.dwell_delay"}}>-</button>
                </span>
                {{input value=pending_preferences.device.dwell_delay class="form-control" id="dwell_delay" placeholder="100"}}
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.dwell_delay"}}>+</button>
                </span>
              </div>
            </div>
            <div class="col-sm-4">
              <p class="form-control-static">{{t "milliseconds before starting a new selection" key='milliseconds_delay'}}</p>
            </div>
          </div>
          <div class="form-group">
            <label for="dwell_release_distance" class="col-sm-3 control-label">{{t "Next Dwell Movement" key='dwell_release'}}</label>
            <div class="col-sm-2">
              {{bound-select select_class="form-control" select_id="dwell_release_distance" content=dwellReleaseDistanceList selection=pending_preferences.device.dwell_release_distance action=(action (mut pending_preferences.device.dwell_release_distance)) }}
            </div>
            <div class="col-sm-3">
              <p class='form-control-static'>{{t "before starting a new selection" key='move_after_select'}}</p>
            </div>
          </div>
          <div class="form-group">
            <label for="dwell_targeting" class="col-sm-3 control-label">{{t "Dwell Targeting Style" key='dwell_targeting'}}</label>
            <div class="col-sm-5">
              {{bound-select select_class="form-control" select_id="scanning_mode" content=targetingList selection=pending_preferences.device.dwell_targeting action=(action (mut pending_preferences.device.dwell_targeting)) }}
            </div>
          </div>
          <div class="form-group">
            <label for="dwell_gravity" class="col-sm-3 control-label">{{t "Dwell Gravity" key='dwell_gravity'}}</label>
            <div class="col-sm-5">
              <div class="checkbox big_checkbox">
                <label>
                  {{input type="checkbox" checked=pending_preferences.device.dwell_gravity id="dwell_gravity"}}
                  {{t "Stay on the same target if the user's gaze leaves a bit" key='enable_dwell_gravity'}}
                </label>
              </div>
            </div>
          </div>
        {{/if}}
        <div class="form-group">
          <label for="dwell_modeling" class="col-sm-3 control-label">{{t "Dwell Modeling" key='dwell_modeling'}}</label>
          <div class="col-sm-5">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.dwell_modeling id="dwell_modeling"}}
                {{t "Mark clicks/touches as modeling events, not user selections" key='touch_as_modeling'}}
              </label>
            </div>
          </div>
        </div>
      {{/if}}
    {{/preference-box}}
  {{/if}}
  {{#unless advanced}}
    {{#if user_voice_list}}
      <div class="form-group">
        <label for="voice_pitch" class="col-sm-3 col-xs-12 control-label">{{t "Voice" key='voiceURI'}}</label>
        <div class="col-sm-3 col-xs-7">
          {{bound-select select_class="form-control" select_id="voiceURI" content=user_voice_list selection=pending_preferences.device.voice.voice_uri action=(action (mut pending_preferences.device.voice.voice_uri)) }}
        </div>
        <div class="col-sm-2 col-xs-5">
          <button class='btn btn-default' {{action "premium_voices"}}>{{t "Premium Voices" key='premium_voices'}}</button>
        </div>
      </div>
      <div class="form-group" style="margin-top: -15px;">
        <div class="col-sm-6 col-sm-offset-3">
          {{#if ios_app}}
            <p class='text-info'>{{t "NOTE: There is a bug in Apple's speech engine which can cause some system voices not to work. If this is happening for you, try using a Premium Voice or selecting \"System Default Voice\" to get around the problem." key='apple_tts_bug'}}</p>
          {{/if}}
        </div>
      </div>
    {{/if}}
    <div class="form-group">
      <label for="voice_rate" class="col-sm-3 col-xs-12 control-label">{{t "Voice Rate" key='voice_rate'}}</label>
      <div class="col-sm-3 col-xs-7">
        <div class="input-group">
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.voice.rate"}}>-</button>
          </span>
          {{input value=pending_preferences.device.voice.rate class="form-control" id="voice_rate" placeholder="1.0"}}
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.voice.rate"}}>+</button>
          </span>
        </div>
      </div>
      <div class="col-sm-2 col-xs-5">
        <button class='btn btn-default' {{action "test_voice"}}>{{t "Test Voice" key='test_voice'}}</button>
      </div>
    </div>
  {{else}}
    {{#preference-box title="Voice Settings" glyph='glyphicon glyphicon-volume-up' title_key='voice_settings'}}
      <span style='display: none;'>{{t "Voice Settings" key='voice_settings'}}</span>
      {{#if user_voice_list}}
        <div class="form-group">
          <label for="voice_pitch" class="col-sm-3 col-xs-12 control-label">{{t "Voice" key='voiceURI'}}</label>
          <div class="col-sm-3 col-xs-7">
            {{bound-select select_class="form-control" select_id="voiceURI" content=user_voice_list selection=pending_preferences.device.voice.voice_uri action=(action (mut pending_preferences.device.voice.voice_uri)) }}
          </div>
          <div class="col-sm-2 col-xs-5">
            <button class='btn btn-default' {{action "premium_voices"}}>{{t "Premium Voices" key='premium_voices'}}</button>
          </div>
        </div>
        <div class="form-group" style="margin-top: -15px;">
          <div class="col-sm-6 col-sm-offset-3">
            {{#if ios_app}}
              <p class='text-info'>{{t "NOTE: There is a bug in Apple's speech engine which can cause some system voices not to work. If this is happening for you, try using a Premium Voice or selecting \"System Default Voice\" to get around the problem." key='apple_tts_bug'}}</p>
            {{/if}}
          </div>
        </div>
      {{else if kindle_without_voice}}
        <div class="form-group">
          <label for="voice_pitch" class="col-sm-3 col-xs-12 control-label">{{t "Voice" key='voiceURI'}}</label>
          <div class="col-sm-3 col-xs-7">
            <p class='form-control-static text-info'>
              {{t "NOTE: Some Kindle Fire tablets don't come with text-to-speech pre-installed. To download a voice to go the home screen, hit Settings, Keyboard & Language, Text-To-Speech and Download one or more system voices" key='kindle_voices_missing' }}
            </p>
          </div>
          <div class="col-sm-2 col-xs-5">
            <button class='btn btn-default' {{action "premium_voices"}}>{{t "Premium Voices" key='premium_voices'}}</button>
          </div>
        </div>
      {{/if}}
      <div class="form-group">
        <label for="voice_rate" class="col-sm-3 col-xs-12 control-label">{{t "Voice Rate" key='voice_rate'}}</label>
        <div class="col-sm-3 col-xs-7">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.voice.rate"}}>-</button>
            </span>
            {{input value=pending_preferences.device.voice.rate class="form-control" id="voice_rate" placeholder="1.0"}}
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.voice.rate"}}>+</button>
            </span>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="voice_pitch" class="col-sm-3 col-xs-12 control-label">{{t "Voice Pitch" key='voice_pitch'}}</label>
        <div class="col-sm-3 col-xs-7">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.voice.pitch"}}>-</button>
            </span>
            {{input value=pending_preferences.device.voice.pitch class="form-control" id="voice_pitch" placeholder="1.0"}}
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.voice.pitch"}}>+</button>
            </span>
          </div>
        </div>
      </div>
      <div class="form-group" style="margin-top: -15px;">
        <div class="col-sm-6 col-sm-offset-3">
          (some voices don't support changing pitch/volume/etc.)
        </div>
      </div>
      <div class="form-group">
        <label for="voice_volume" class="col-sm-3 col-xs-12 control-label">{{t "Voice Volume" key='voice_volume'}}</label>
        <div class="col-sm-3 col-xs-7">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.voice.volume"}}>-</button>
            </span>
            {{input value=pending_preferences.device.voice.volume class="form-control" id="voice_volume" placeholder="1.0"}}
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.voice.volume"}}>+</button>
            </span>
          </div>
        </div>
        <div class="col-sm-2 col-xs-5">
          <button class='btn btn-default' {{action "test_voice"}}>{{t "Test Voice" key='test_voice'}}</button>
        </div>
      </div>
      {{#if audio_target_available}}
        <div class="form-group">
          <label for="voice_output" class="col-sm-3 control-label">{{t "Voice Output" key='voice_output'}}</label>
          <div class="col-sm-5">
            {{bound-select select_class="form-control" select_id="voice_output" content=audioOutputList selection=pending_preferences.device.voice.target action=(action (mut pending_preferences.device.voice.target)) }}
            {{#if audio_switching_delays.primary}}
              <em>{{t "There may be a short delay on this device if switching between different outputs" key='possible_output_delay'}}</em>
            {{/if}}
          </div>
        </div>
      {{/if}}

      <div class="form-group">
        <label for="alternate_voice" class="col-sm-3 control-label">{{t "Secondary Voice" key='secondary_voice'}}</label>
        <div class="col-sm-5">
          <div class="checkbox big_checkbox">
            <label>
              {{input type="checkbox" checked=pending_preferences.device.alternate_voice.enabled id="alternate_voice"}}
              {{t "Use My Secondary Voice for Some Prompts" key='use_different_prompting_voice'}}
            </label>
          </div>
        </div>
      </div>
      {{#if pending_preferences.device.alternate_voice.enabled}}
        {{#if user_voice_list}}
          <div class="form-group">
            <div class="col-sm-3 col-xs-7 col-sm-offset-3">
              {{bound-select select_class="form-control" select_id="alternate_voice_uri" content=user_voice_list selection=pending_preferences.device.alternate_voice.voice_uri action=(action (mut pending_preferences.device.alternate_voice.voice_uri)) }}
            </div>
          </div>
        {{/if}}
        <div class="form-group">
          <label for="alternate_voice_purposes" class="col-sm-3 col-xs-12 control-label">{{t "Secondary Voice Purpose" key='alternate_voice_purpose'}}</label>
          <div class="col-sm-5 col-xs-7">
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_scanning disabled=not_scanning id="for_scanning"}}
                {{t "Use for Scanning Prompts" key='use_for_scanning'}}
              </label>
            </div>
            <div class="checkbox big_checkbox" style='display: none;'>
              <label>
                {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_fishing disabled=not_fishing id="for_fishing"}}
                {{t "Use for Auditory Fishing" key='use_for_fishing'}}
              </label>
            </div>
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_integrations id="for_integrations"}}
                {{t "Use for Third-Party Integrations" key='use_for_integrations'}}
              </label>
            </div>
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_buttons id="for_buttons"}}
                {{t "Use for Button Presses" key='use_for_buttons'}}
              </label>
            </div>
            <div class="checkbox big_checkbox">
              <label>
                {{input type="checkbox" checked=pending_preferences.device.alternate_voice.for_messages id="for_messages"}}
                {{t "Use for Inbound Messages" key='use_for_messages'}}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="alternate_voice_rate" class="col-sm-3 col-xs-12 control-label">{{t "Secondary Voice Rate" key='alternate_voice_rate'}}</label>
          <div class="col-sm-3 col-xs-7">
            <div class="input-group">
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.alternate_voice.rate"}}>-</button>
              </span>
              {{input value=pending_preferences.device.alternate_voice.rate class="form-control" id="alternate_voice_rate" placeholder="1.0"}}
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.alternate_voice.rate"}}>+</button>
              </span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="alternate_voice_pitch" class="col-sm-3 col-xs-12 control-label">{{t "Secondary Voice Pitch" key='secondary_voice_pitch'}}</label>
          <div class="col-sm-3 col-xs-7">
            <div class="input-group">
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.alternate_voice.pitch"}}>-</button>
              </span>
              {{input value=pending_preferences.device.alternate_voice.pitch class="form-control" id="alternate_voice_pitch" placeholder="1.0"}}
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.alternate_voice.pitch"}}>+</button>
              </span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="alternate_voice_volume" class="col-sm-3 col-xs-12 control-label">{{t "Secondary Voice Volume" key='alternate_voice_volume'}}</label>
          <div class="col-sm-3 col-xs-7">
            <div class="input-group">
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "minus" "pending_preferences.device.alternate_voice.volume"}}>-</button>
              </span>
              {{input value=pending_preferences.device.alternate_voice.volume class="form-control" id="alternate_voice_volume" placeholder="1.0"}}
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" {{action "plus_minus" "plus" "pending_preferences.device.alternate_voice.volume"}}>+</button>
              </span>
            </div>
          </div>
          <div class="col-sm-2 col-xs-5">
            <button class='btn btn-default' {{action "test_voice" 'alternate'}}>{{t "Test Voice" key='test_voice'}}</button>
          </div>
        </div>
      {{#if audio_target_available}}
          <div class="form-group">
            <label for="alternate_voice_output" class="col-sm-3 control-label">{{t "Secondary Voice Output" key='alternate_voice_output'}}</label>
            <div class="col-sm-5">
              {{bound-select select_class="form-control" select_id="alternate_voice_output" content=audioOutputList selection=pending_preferences.device.alternate_voice.target action=(action (mut pending_preferences.device.alternate_voice.target)) }}
              {{#if audio_switching_delays.alternate}}
                <em>{{t "There may be a short delay on this device if switching between different outputs" key='possible_output_delay'}}</em>
              {{/if}}
            </div>
          </div>
        {{/if}}
      {{/if}}
    {{/preference-box}}
  {{/unless}}
  
  {{#if pending_preferences.device.allows_home_override}}
    <div class="form-group">
      <label for="hard_sidebar" class="col-sm-3 control-label">{{t "Device Home" key='device_home'}}</label>
      <div class="col-sm-5">
        <div class="checkbox big_checkbox">
          <label>
            {{input type="checkbox" checked=pending_preferences.device.device_home id="device_home"}}
            {{t "Replace the device's home screen with %app_name%" key='device_home_screen'}}
          </label>
        </div>
      </div>
    </div>
  {{/if}}
  {{#unless advanced}}
    <div class="form-group">
      <div class="col-sm-5 col-sm-offset-3">
        <a href="#" {{action 'toggle_advanced'}}>{{t "more options" key='more_options'}}</a>
      </div>
    </div>
  {{/unless}}
  <div class="form-group" style='margin-top: 20px;'>
    <div class="col-sm-offset-3 col-sm-5">
      <button type="submit" class="btn btn-primary">
        {{#if status.saving}}
          {{t "Saving Preferences..." key='saving_preferences'}}
        {{else if status.error}}
          {{t "Error Saving Preferences" key='error_saving_preferences'}}
        {{else}}
          {{t "Save Preferences" key='save_preferences'}}
        {{/if}}
      </button>
      <button type="button" class="btn btn-default" {{action "cancelSave"}}>{{t "Cancel" key='cancel'}}</button>
    </div>
  </div>
  </form>
{{else if session.isAuthenticated}}
  <p>{{t "It looks like you don't have permission to access this information" key='not_authorized_for_access'}}</p>
{{else}}
  {{login-form left=true prompt=true return=true}}
{{/if}}